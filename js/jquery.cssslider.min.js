;(function(e,t,n,r){function u(t,n){this.element=t;this.jqElem=e(t);this.items=e(this.element).children("li");this.numSliderItems=this.items.length;this.currentItem=1;this.commandQueue=[];this.jqElem.data(i,this);this.options=e.extend({},s,n);this._defaults=s;this._name=i;this.inTransition=false;this.init()}function a(){var e=n.body||n.documentElement;var t=e.style;var r="transition";if(typeof t[r]=="string"){return true}v=["Moz","Webkit","Khtml","O","ms"],r=r.charAt(0).toUpperCase()+r.substr(1);for(var i=0;i<v.length;i++){if(typeof t[v[i]+r]=="string"){return true}}return false}var i="AnimatedSlider",s={infiniteScroll:true,visibleItems:3,changedCallback:null,willChangeCallback:null,userChangedCallback:null};var o=a();u.prototype.init=function(){var t=this;this.jqElem.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(){if(t.inTransition){t.inTransition=false;if(t.options.changedCallback)t.options.changedCallback(t,t.currentItem);setTimeout(function(){t.doCommandQueue()},50)}});if(this.options.prevButton){e(this.options.prevButton).on("click",function(e){e.preventDefault();t.prevItem()})}if(this.options.nextButton){e(this.options.nextButton).on("click",function(e){e.preventDefault();t.nextItem()})}this.setItem(1)};u.prototype.setItem=function(e){var t=this.items;t.removeClass();var n=function(e){return e};var r;if(this.options.infiniteScroll)r=this._wrapIndex;else r=n;for(var i=0;i<t.length;i++){var s=t.eq(i);if(i==e){s.addClass("current_item")}else if(i<e){s.addClass("previous_hidden")}else if(i>e){s.addClass("next_hidden")}}if(this.options.infiniteScroll){t.eq(this._wrapIndex(e-1)).removeClass().addClass("previous_item");t.eq(this._wrapIndex(e+1)).removeClass().addClass("next_item");if(this.options.visibleItems==3){t.eq(this._wrapIndex(e-2)).removeClass().addClass("previous_hidden");t.eq(this._wrapIndex(e+2)).removeClass().addClass("next_hidden")}else if(this.options.visibleItems==5){t.eq(this._wrapIndex(e-2)).removeClass().addClass("previous_item_2");t.eq(this._wrapIndex(e+2)).removeClass().addClass("next_item_2");t.eq(this._wrapIndex(e-3)).removeClass().addClass("previous_hidden");t.eq(this._wrapIndex(e+3)).removeClass().addClass("next_hidden")}}else{if(e-1>=0)t.eq(e-1).removeClass().addClass("previous_item");if(e+1<this.numSliderItems)t.eq(e+1).removeClass().addClass("next_item");if(this.options.visibleItems==5){if(e-2>=0)t.eq(e-1).removeClass().addClass("previous_item_2");if(e+2<this.numSliderItems)t.eq(e+1).removeClass().addClass("next_item_2")}}currentItem=e;if(o){this.inTransition=true;if(this.options.willChangeCallback)this.options.willChangeCallback(this,this.currentItem)}else{if(this.options.willChangeCallback)this.options.willChangeCallback(this,this.currentItem);if(this.options.changedCallback)this.options.changedCallback(this,this.currentItem)}};u.prototype.nextItem=function(){if(this.inTransition){this.commandQueue.push("nextItem");return}if(this.options.infiniteScroll||this.currentItem<this.numSliderItems-1){this.currentItem+=1;this.currentItem=this._wrapIndex(this.currentItem);this.setItem(this.currentItem);if(this.options.userChangedCallback)this.options.userChangedCallback(this,this.currentItem)}};u.prototype.prevItem=function(){if(this.inTransition){this.commandQueue.push("prevItem");return}if(this.options.infiniteScroll||this.currentItem>=1){this.currentItem-=1;this.currentItem=this._wrapIndex(this.currentItem);this.setItem(this.currentItem);if(this.options.userChangedCallback)this.options.userChangedCallback(this,this.currentItem)}};u.prototype.doCommandQueue=function(){if(this.commandQueue.length==0)return;var e=this.commandQueue.splice(0,1)[0];this[e]()};u.prototype.refresh=function(){this.items=e(this.element).children("li");this.numSliderItems=this.items.length;this.setItem(this.currentItem)};u.prototype._wrapIndex=function(e){if(e<0){e+=this.numSliderItems}if(e>=this.numSliderItems)e-=this.numSliderItems;return e};e.fn[i]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+i)){e.data(this,"plugin_"+i,new u(this,t))}})}})(jQuery,window,document)